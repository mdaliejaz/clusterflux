
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <title>Pending Work Â· GitBook</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.0">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="decisions.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="api.html">
            
                <a href="api.html">
            
                    
                    API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="clusterflux-client.html">
            
                <a href="clusterflux-client.html">
            
                    
                    Clusterflux Client
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="decisions.html">
            
                <a href="decisions.html">
            
                    
                    Design Decisions
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5" data-path="pending.html">
            
                <a href="pending.html">
            
                    
                    Pending Work
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Pending Work</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="introduction">Introduction</h1><p>This file contains list of pending features that needs to be implemented.</p><ol><li><p>Test cases for cluster meta watcher. Currently it&apos;s only testing read behavior. Would be good to have more granular tests. Most of the code is not covered through tests. This should be of highest priority.</p></li>
<li><p>Handle all errors. Some of the errors are not handled properly.</p></li>
<li><p>Benchmark Protobuf (serializing slice of protobuf vs serilizing protobuf for a slice (eg. point vs points proto))</p></li>
<li><p>All configurations should be from TOML (eg. Bind Address). Most of our configuration is through environment variables.</p></li>
<li><p>Look at the _internal database replication (remote/local?).</p></li>
<li><p>Handle scenarios where node goes down. Move data from existing replicas to the replaced node.</p></li>
<li><p>Create StatMap for ClusterFlux and log ClusterFlux metrics (remote write, meta update success/failure) to _internal database.</p></li>
<li><p>Kubernetes (with petset)</p></li>
<li><p>Upgrade etcd2 to etcd3.</p></li>
<li><p>UI for admins to monitor alive nodes, etc.</p></li>
<li><p>Store last 10 data versions of metadata. store recent versions as /cluster/history/<version> to etcd, say last 10 versions for a cluster</version></p></li>
<li><p>URL QueryUnescape in ClusterFlux application. Cluster names can have some special characters which might not work with our API unless escaped. We should escape all names in the request and response.</p></li>
<li><p>Ability to stop cluster read thread.    There&apos;s a done channel on which the service listens to. We can implement a method that users can call to put a message on this channel to cancel the read thread. This is a low priority as the maximum life of long poll is anyways 5 minutes.</p></li>
<li><p>Fix the following bug (occurred during preparing for final presentation):</p><pre><code>[clusterflux] 2016/08/17 03:44:00 Polling for updates from Clusterflux.
panic: runtime error: invalid memory address or nil pointer dereference
[signal 0xb code=0x1 addr=0x58 pc=0x68b888]

goroutine 43 [running]:
panic(0xcb8560, 0xc820010080)
/usr/local/go/src/runtime/panic.go:481 +0x3e6
github.com/influxdata/influxdb/gossip.(*TSDBStore).WriteToShard(0xc8201826c0, 0x1, 0xc82042ff80, 0x6, 0x8, 0x0, 0x0)
/gopath/src/github.com/influxdata/influxdb/gossip/tsdbstore.go:85 +0x88
github.com/influxdata/influxdb/coordinator.(*PointsWriter).writeToShard(0xc8200725a0, 0xc82034ba20, 0xc82011bbd0, 0x9, 0xddfc28, 0x7, 0xc82042ff80, 0x6, 0x8, 0x0, ...)
/gopath/src/github.com/influxdata/influxdb/coordinator/points_writer.go:323 +0x2c1
github.com/influxdata/influxdb/coordinator.(*PointsWriter).WritePoints.func1(0xc8202a47e0, 0xc8200725a0, 0xc82034ba20, 0xc82011bbd0, 0x9, 0xddfc28, 0x7, 0xc82042ff80, 0x6, 0x8)
/gopath/src/github.com/influxdata/influxdb/coordinator/points_writer.go:278 +0x8d
created by github.com/influxdata/influxdb/coordinator.(*PointsWriter).WritePoints
/gopath/src/github.com/influxdata/influxdb/coordinator/points_writer.go:279 +0x3e6</code></pre>
<ol><li>bindAddress is actually advertised address; peer address of the node. Not the address at which it listens on. The address it listens on is currently hard coded to :8888.
</li></ol>
</li></ol>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="decisions.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Design Decisions">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Pending Work","level":"1.5","depth":1,"previous":{"title":"Design Decisions","level":"1.4","depth":1,"path":"decisions.md","ref":"decisions.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"pending.md","mtime":"2016-08-19T00:16:08.000Z","type":"markdown"},"gitbook":{"version":"3.2.0","time":"2016-08-19T18:04:38.959Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

